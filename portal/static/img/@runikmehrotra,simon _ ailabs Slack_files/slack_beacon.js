(function(){var global_id=window["SlackBeaconObject"];var q=window[global_id]&&window[global_id].q;var l=window[global_id]&&window[global_id].l;var config={};var _keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var base64={encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+_keyStr.charAt(enc1)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4)}return output}};function euc(s){return s==undefined?"":encodeURIComponent(""+s)}function process(ts,args){if(args[0]=="init"){config.token=args[1];return}if(args[0]=="identify"){config.distinct_id=args[1];return}if(args[0]=="people_set"){config.person=args[1];return}if(args[0]=="name_tag"){config.name_tag=args[1];return}if(args[0]=="set"){config[args[1]]=args[2];return}if(args[0]=="track"){var props=config;if(args[2])for(var i in args[2])props[i]=args[2][i];if(args[1]=="pageview")props.url=window.location.href;var obj={time:ts,event:args[1]};for(var i in props)obj[i]=props[i];var json=JSON.stringify(obj);var b=base64.encode(json);var url="/beacon/track/?d="+euc(b);(new Image).src=url;return}if(window.console&&console.log)console.log("unknown beacon event",ts,args)}window[global_id]=function(){process(1*new Date,arguments)};if(!q)return;for(var i=0;i<q.length;i++){process(q[i][0],q[i][1])}})();
