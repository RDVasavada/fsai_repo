/*! vizuly 21-03-2016 */
vizuly.component.scatter=function(a){function b(){k=f.selection.append("svg").attr("id",f.id).style("overflow","visible").attr("class","vizuly"),q=k.append("rect").attr("class","vz-background"),s=vizuly.util.getDefs(h),l=k.append("g").attr("class","vz-scatter-viz"),m=l.append("g").attr("class","vz-scatter-bottom-axis").attr("clip-path","url(#"+f.id+"_xClipPath)").append("g"),n=l.append("g").attr("class","vz-scatter-left-axis"),o=l.append("g").attr("class","vz-scatter-plot").attr("clip-path","url(#"+f.id+"_plotClipPath)"),r=o.append("rect").attr("class","vz-plot-background").style("fill","#FFF").style("fill-opacity",.01),f.dispatch.initialize()}function c(){h.validate(),i=vizuly.util.size(f.margin,f.width,f.height),"undefined"==f.xScale&&(f.xScale=vizuly.util.getTypedScale(h.x()(f.data[0]))),"undefined"==f.yScale&&(f.yScale=vizuly.util.getTypedScale(h.y()(f.data[0]))),"undefined"==f.rScale&&(f.rScale=vizuly.util.getTypedScale(h.r()(f.data[0]))),e(f.xScale,f.x,f.data),e(f.yScale,f.y,f.data),e(f.rScale,f.r,f.data),j=Math.min(i.width,i.height)/20,vizuly.util.setRange(f.yScale,i.height-j,j),vizuly.util.setRange(f.xScale,j,i.width-j),vizuly.util.setRange(f.rScale,1,j),f.xAxis.scale(f.xScale).orient("bottom"),f.yAxis.scale(f.yScale),f.dispatch.measure()}function d(){c(),k.attr("width",f.width).attr("height",f.height),q.attr("width",f.width).attr("height",f.height),o.style("width",i.width).style("height",i.height).attr("transform","translate("+(i.left+j)+","+i.top+")"),m.attr("transform","translate("+i.left+","+(i.height+i.top)+")"),n.attr("transform","translate("+i.left+","+i.top+")"),r.attr("width",i.width).attr("height",i.height),p=o.selectAll(".vz-scatter-node").data(f.data),p.enter().append("circle").attr("class","vz-scatter-node").attr("r",0).attr("cx",function(a,b){return f.xScale(f.x(a))}).attr("cy",function(a,b){return i.height}).on("mouseover",function(a,b){f.dispatch.mouseover(this,a,b)}).on("mouseout",function(a,b){f.dispatch.mouseout(this,a,b)}).on("click",function(a,b){f.dispatch.click(this,a,b)}).style("fill-opacity",.3),p.exit().remove(),p.transition().duration(f.duration).attr("cx",function(a,b){return f.xScale(f.x(a))}).attr("cy",function(a,b){return f.yScale(f.y(a))}).attr("r",function(a,b){return f.rScale(f.r(a))}),m.call(f.xAxis),n.call(f.yAxis),f.dispatch.update()}function e(a,b,c){"string"==typeof b(c[0])?a.domain(c.map(function(a){return b(a)})):a.domain([d3.min(c,function(a){return b(a)}),d3.max(c,function(a){return b(a)})])}var f={},g={data:null,margin:{top:"10%",bottom:"7%",left:"9%",right:"7%"},duration:500,width:300,height:300,x:null,y:null,r:null,xScale:"undefined",yScale:"undefined",rScale:"undefined",xAxis:d3.svg.axis(),yAxis:d3.svg.axis()},h=vizuly.viz.create(a,f,g);h.type="viz.chart.column";var i,j,k,l,m,n,o,p,q,r,s;return b(),h.update=function(){return d(),h},h};