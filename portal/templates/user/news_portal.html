<!DOCTYPE html>
<html lang="en">
<head>        
    <title>FSAI - News Portal</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <link rel="icon" type="image/ico" href="favicon.ico"/>
           
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/fsai.css" rel="stylesheet">
    <link href="/static/css2/stylesheets.css" rel="stylesheet" type="text/css">
    <script type='text/javascript' src='/static/js/plugins/jquery/jquery.min.js'></script>
    <script type='text/javascript' src='/static/js/plugins/jquery/jquery-ui.min.js'></script>   
    <script type='text/javascript' src='/static/js/plugins/jquery/jquery-migrate.min.js'></script>
    <script type='text/javascript' src='/static/js/plugins/jquery/globalize.js'></script>    
    <script type='text/javascript' src='/static/js/plugins/bootstrap/bootstrap.min.js'></script>
    
    <script type='text/javascript' src='/static/js/plugins/uniform/jquery.uniform.min.js'></script>    
    <script type='text/javascript' src='/static/js/plugins/mcustomscrollbar/jquery.mCustomScrollbar.min.js'></script>
    
    <script type='text/javascript' src='/static/js/plugins.js'></script>    
    <script type='text/javascript' src='/static/js/actions.js'></script>

</head>
<body class="bg-img-num1"> 
    <div class="container" style="font-family:'Helvetica Neue Ultra light'">   

<!-- Top Nav Bar -->
        <div class="row">
            <div class="col-md-12">
                <ol class="breadcrumb" style="margin-top:33px">
                    <li><a href="#">Home</a></li>                    
                    <li><a href="dashboard">Dashboard</a></li>                                        
                    <li class="active">News Portal</li>
                </ol>
            </div>
        </div>

<!-- Main Content      -->
        <div class="row">
<!-- Left Hand Navi Menu -->
            <div class="col-md-2" style="margin-top:50px">
                <div class="page-sidebar">
                    <div class="page-navigation-panel">
                        <div class="name">Howdy, {{user.username}}</div>
                        <div class="control"><a href="#" class="psn-control"><span class="icon-reorder"></span></a></div>
                    </div>            
                    <div class="page-navigation-panel search">                                
                        <div class="input-group">                        
                            <input type="text" class="form-control" placeholder="Search...">
                            <div class="input-group-addon"><span class="icon-search"></span></div>
                        </div>                
                    </div>
                    <ul class="page-navigation">
                        <li>
                            <a href="/user/dashboard">
                                <span class="icon-home"></span> Dashboard
                            </a>
                        </li>                            
                        <li>
                            <a href="#"><span class="icon-comments"></span> Messages</a>
                            <ul>                                    
                                <li><a href="form_elements.html">Inbox</a></li>
                                <li><a href="form_editors.html">Sent</a></li>
                                <li><a href="form_files.html">Deleted</a></li>
                                <li><a href="form_validation.html">Starred</a></li>
                            </ul>                                
                        </li>
                        <li>
                            <a href="#"><span class="icon-folder-open-alt"></span> My Portfolios</a>
                            <ul>
                                <li><a href="/user/my_portfolios">Portfolio Summary </a></li>
                                {% for portfolio in portfolios %}
                                    <li><a href="user/individual_portfolio/{{ portfolio.id }}">{{ portfolio.name }}</a></li>
                                {% endfor %}
                            </ul>
                        </li>  
                        <li>
                            <a href="/user/portfolio_settings"><span class="icon-plus"></span> Create a New Portfolio</a>
                        </li>
                        <li>
                            <a href="/user/news_portal"><span class="icon-flag-alt"></span> News & Sentiment</a>
                        </li>
                        <li>
                            <a href="#"><span class="icon-cogs"></span> Help & Suggestions</a>
                        </li>
                        <li>
                            <a href="/logout"><span class="icon-share-alt"></span> Log Out</a>
                        </li>                                                                   
                    </ul>
                </div>
            </div>
            <div class="col-md-10" style="padding-right:50px">
                <div class="row">
                <center><h1>News Portal</h1></center>
            </div>    
                <div class="row" style="height:80vh;overflow:scroll;width:80vw">                
                    <div class="block">
                        <h3>Urgent News</h3>
                        <div class="header">
                            <table class="table">
                                    <tr>
                                        <th class="col-md-2">Date</th>
                                        <th class="col-md-3">TKR</th>
                                        <th class="col-md-3">Portfolio</th>
                                        <th class="col-md-3">Links</th>
                                    </tr>
                            </table>                       
                        </div>
                        <div class="content" style="height:175px;overflow:scroll">
                            <table class="table">
                                <tbody id="urgent-pin">
                                    <tr id="urgent-incoming">
                                    </tr>         
                                </tbody>
                            </table>                       
                        </div>
                    </div>    
                    <div class="block">
                        <h3>Important News</h3>
                        <div class="header">
                            <table class="table">
                                    <tr>
                                        <th class="col-md-2">Date</th>
                                        <th class="col-md-3">TKR</th>
                                        <th class="col-md-3">Portfolio</th>
                                        <th class="col-md-3">Links</th>
                                    </tr>
                            </table>                       
                        </div>
                        <div class="content" style="height:175px;overflow:scroll">
                            <table class="table">
                                <tbody id="important-pin">
                                    <tr id="important-incoming">
                                    </tr>         
                                </tbody>
                            </table>                       
                        </div>
                    </div>  
                    <div class="block">
                        <h3>Earnings Corner</h3>
                        <div class="header">
                            <table class="table">
                                    <tr>
                                        <th class="col-md-2">Date</th>
                                        <th class="col-md-3">TKR</th>
                                        <th class="col-md-3">Earnings Date</th>
                                        <th class="col-md-3">Sentiment & Market Projections</th>
                                    </tr>
                            </table>                       
                        </div>
                        <div class="content" style="height:175px;overflow:scroll">
                            <table class="table">
                                <tbody id="earnings-pin">
                                    <tr id="earnings-incoming">
                                    </tr>         
                                </tbody>
                            </table>                       
                        </div>
                    </div>  
                    <div class="block">
                        <h3>Market Sentiment</h3>
                        <div class="header">                      
                        </div>
                        <div class="content" style="height:250px">
                         <div class="row">
                            <div class="col-md-3"></div>
                            <div class="col-lg-6">
                                <div id="morris-line-chart" style="position: relative; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);height:200px;"><svg height="200" version="1.1" width="670" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative; left: -0.984375px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with RaphaÃ«l 2.1.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs><text x="32.515625" y="161" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">0</tspan></text><path fill="none" stroke="#aaaaaa" d="M45.015625,161H645" stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="32.515625" y="127" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">25</tspan></text><path fill="none" stroke="#aaaaaa" d="M45.015625,127H645" stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="32.515625" y="93" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">50</tspan></text><path fill="none" stroke="#aaaaaa" d="M45.015625,93H645" stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="32.515625" y="58.999999999999986" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal"><tspan dy="3.999999999999986" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">75</tspan></text><path fill="none" stroke="#aaaaaa" d="M45.015625,58.999999999999986H645" stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="32.515625" y="25" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">100</tspan></text><path fill="none" stroke="#aaaaaa" d="M45.015625,25H645" stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><text x="645" y="173.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Saturday</tspan></text><text x="545.048244237791" y="173.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">2011</tspan></text><text x="445.0964884755819" y="173.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Friday</tspan></text><text x="345.1447327133729" y="173.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Thursday</tspan></text><text x="244.91913652441806" y="173.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Wednesday</tspan></text><text x="144.96738076220902" y="173.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Tuesday</tspan></text><text x="45.015625" y="173.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="white" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Monday</tspan></text><path fill="none" stroke="#157dec" d="M45.015625,38.599999999999994C70.00356394055225,47.099999999999994,119.97944182165676,64.1,144.96738076220902,72.6C169.95531970276127,81.1,219.9311975838658,106.6,244.91913652441806,106.6C269.9755355716568,106.6,320.0883336661342,72.6,345.1447327133729,72.6C370.1326716539252,72.6,420.1085495350296,106.6,445.0964884755819,106.6C470.0844274161342,106.6,520.0603052972388,81.1,545.048244237791,72.6C570.0361831783432,64.1,620.0120610594478,47.099999999999994,645,38.599999999999994" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><path fill="none" stroke="#ffffff" d="M45.015625,25C70.00356394055225,33.5,119.97944182165676,50.499999999999986,144.96738076220902,58.999999999999986C169.95531970276127,67.49999999999999,219.9311975838658,93,244.91913652441806,93C269.9755355716568,93,320.0883336661342,58.999999999999986,345.1447327133729,58.999999999999986C370.1326716539252,58.999999999999986,420.1085495350296,93,445.0964884755819,93C470.0844274161342,93,520.0603052972388,67.49999999999999,545.048244237791,58.999999999999986C570.0361831783432,50.499999999999986,620.0120610594478,33.5,645,25" stroke-width="3" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><circle cx="45.015625" cy="38.599999999999994" r="4" fill="#157dec" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="144.96738076220902" cy="72.6" r="4" fill="#157dec" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="244.91913652441806" cy="106.6" r="4" fill="#157dec" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="345.1447327133729" cy="72.6" r="4" fill="#157dec" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="445.0964884755819" cy="106.6" r="4" fill="#157dec" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="545.048244237791" cy="72.6" r="4" fill="#157dec" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="645" cy="38.599999999999994" r="4" fill="#157dec" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="45.015625" cy="25" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="144.96738076220902" cy="58.999999999999986" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="244.91913652441806" cy="93" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="345.1447327133729" cy="58.999999999999986" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="445.0964884755819" cy="93" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="545.048244237791" cy="58.999999999999986" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle><circle cx="645" cy="25" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle></svg><div class="morris-hover morris-default-style" style="display: none;"></div></div>
                                </div>
                                                            <div class="col-md-3"></div>

                            </div>                   
                        </div>
                    </div>                      
                </div>
            </div>
        </div>
</body>
<!-- RSS Feed Script -->
    <script>
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function(){
                if (xhr.readyState==4 && xhr.status==200)
                {
                    var data = JSON.parse(xhr.responseText).items;
                    var urgent_news = [];
                    var important_news = [];
                    var earnings_corner = [];
                    var stockNames = ["AMOV","AMX","CX","KOF","ICA","FMX","OMAB","PAC","ASR","BSMX","SIM","TV","IBC","ASD","TFSC","TFSCW","PIH","XXII","FCvCY","SRCE","TWOU","CFAD","EGHT","AVHI"];
                    var portfolioTypes = ["High Risk Portfolio","Tech Portfolio","Safe Portfolio"];
                    function fillInData(urgent, important, earnings) {
                        urgent.forEach(function(x){
                            var newClone = $("#urgent-incoming").clone().removeAttr('id');
                            var newItem = "<td class='col-md-2'>"+x.date+"</td><td  class='col-md-3'>"+x.name+"</td><td class='col-md-3'>"+x.type+"</td><td  class='col-md-3'>"+x.title+"</td>";
                            newClone[0].innerHTML = newItem ; 
                            newClone.appendTo($("#urgent-pin"))

                        });
                        important.forEach(function(x){
                            var newClone = $("#important-incoming").clone().removeAttr('id');
                            var newItem = "<td class='col-md-2'>"+x.date+"</td><td  class='col-md-3'>"+x.name+"</td><td class='col-md-3'>"+x.type+"</td><td  class='col-md-3'>"+x.title+"</td>";
                            newClone[0].innerHTML = newItem ; 
                            newClone.appendTo($("#important-pin"))

                        });
                        earnings.forEach(function(x){
                            var newClone = $("#earnings-incoming").clone().removeAttr('id');
                            var newItem = "<td class='col-md-2'>"+x.date+"</td><td  class='col-md-3'>"+x.name+"</td><td class='col-md-3'>"+x.type+"</td><td  class='col-md-3'>"+x.title+"</td>";
                            newClone[0].innerHTML = newItem; 
                            newClone.appendTo($("#earnings-pin"))

                        })                                                  
                    }
                    data.forEach(function(desc,i){
                            var newItem = {
                                title: desc.title,
                                date: desc.pubDate,
                                link: desc.link,
                                type: portfolioTypes[(Math.floor((Math.random() * 3) + 0))],
                                name: stockNames[(Math.floor((Math.random() * 3) + 0))]
                            };
                            var priority = Math.floor((Math.random() * 3) + 0);
                            if (priority == 0) {
                                urgent_news.push(newItem);
                            } else if (priority == 1) {
                                important_news.push(newItem)
                            } else if (priority == 2) {
                                earnings_corner.push(newItem)
                            };
                            if (i === data.length-1) {
                                console.log(urgent_news)
                                console.log(important_news)
                                console.log(earnings_corner)
                                fillInData(urgent_news, important_news, earnings_corner)
                            };
                    })
                }
            };
        xhr.open('GET','http://rss2json.com/api.json?rss_url=http://finance.yahoo.com/rss/headline?s=yhoo,msft,tivo',true);
        xhr.send();   
    </script>
</div>
</html>


