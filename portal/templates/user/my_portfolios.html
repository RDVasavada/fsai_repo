{% extends "base.html" %}
{% block content %}
<div class="row" style="height:auto">
<div class="col-lg-2 col-md-2 col-sm-1"></div>
 <div class="col-lg-2 col-md-2 col-sm-10" style="padding:0px;height:100%;color:black;overflow:hidden;height:auto;margin-bottom:0px;overflow:initial">
    <div class="block block-drop-shadow" style="height:100%;background-color:rgba(0,0,0,0.2)">
        <div class="header">
            <h2>My Portfolios</h2>
        </div>
        <div class="content list-group ui-sortable" id="sortable_example_1" style="background:rgba(0,0,0,0.5);">
            <a href="#" class="list-group-item" style="text-align:center;height:150px">
              <br>
              <span style="font-size:24px;font-weight:100;font-family:'Helvetica Neue';top:7px;left:7px;position:relative">
          Portfolios Summary
              </span><br><br>
             <span style="font-size:14px;font-weight:100;font-family:'Helvetica Neue';position:relative;bottom:7px;color:#00ff00">
              </span><br>           
            </a>            
            {% for portfolio in portfolios %}      
            <a href="/user/individual_portfolio/{{portfolio.id}}" id="/user/individual_portfolio"  class="list-group-item" style="text-align:center;height:150px">{{portfolio.name}}
              <br>
              <span style="font-size:24px;font-weight:100;font-family:'Helvetica Neue';top:7px;left:7px;position:relative">
                ${{portfolio.value}}
              </span><br><br>
             <span style="font-size:14px;font-weight:100;font-family:'Helvetica Neue';position:relative;bottom:7px;color:#00ff00">
                  +33%
              </span><br>
             <span style="font-size:14px;font-weight:100;font-family:'Helvetica Neue'">
                {{portfolio.no_of_tickers}} Tickers
              </span>                
            </a>
            {% endfor %}
        </div>        
    </div>
</div>
<div class="col-lg-6 col-md-6 col-sm-10"> 
    <div style="height:125px">
    <div class="block">
        <div class="input-group">
            <div class="input-group-addon"><span class="icon-search"></span></div>
                <div class="ui-widget">
                    <input type="text" id="tags" class="form-control" value="Search" placeholder="Keyword..." onkeypress="return runScript(event)">                        
                </div>
        </div>
    </div>
    <div class="block block-drop-shadow">
        <div class="head bg-dot30">                      
            <div class="head-panel nm">                            
                <div class="hp-info pull-left">
                    Sort portfolios : 
                </div>   
                <div class="hp-info pull-left">
                    A-Z
                </div> 
                <div class="hp-info pull-left">
                    Highest Return
                </div>
                <div class="hp-info pull-left">
                    Lowest Return
                </div>                                                        
            </div>                        
        </div>
    </div>
</div>
    <div>
    <div id="pin"></pin>
    {% for portfolio in all_portfolios %}
    <div class="block" style="margin-top:50px;margin-bottom:50px">
        <!-- <div class="header"> -->
          <div class="header" style="background-color:rgba(0,0,0,0.4)">
            <div class="side pull-right">              
                <ul class="buttons">       
                    <li><a href="#" class="iport" id="/user/individual_portfolio"><span class="icon-plus"></span> Expand </a></li>                
                </ul>
            </div>
            <h2 id="portfolioName">{{ portfolio.name }}</h2>
            <span style="color:rgba(255,0,0,1);float:right">{{ portfolio.risk}}% Risk </span>
            <span style="float:right;margin-right:15px" id="portChange"></span>
        </div>
        <div class="content">
            <div id="DataTables_Table_2_wrapper" class="dataTables_wrapper" role="grid">
                <table cellpadding="0" cellspacing="0" width="100%" class="table table-bordered table-striped sortable dataTable" id="DataTables_Table_2" aria-describedby="DataTables_Table_2_info" style="width: 100%;">
                <thead>
                    <tr role="row">
                        <th class="sorting_disabled" role="columnheader" rowspan="1" colspan="1" aria-label="" style="width: 18px;background-color:rgba(0,0,0,0)">Symbol</th>
                        <th width="25%" class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_2" rowspan="1" colspan="1" aria-label="ID: activate to sort column ascending" style="width: 237px;">Current Price</th>
                        <th width="25%" class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_2" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 241px;">Buy \ Sell Date</th><th width="25%" class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_2" rowspan="1" colspan="1" aria-label="E-mail: activate to sort column ascending" style="width: 245px;">Number of Shares</th><th width="25%" class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_2" rowspan="1" colspan="1" aria-label="Phone: activate to sort column ascending" style="width: 242px;">Initial Price</th>
                    </tr>
                </thead>
                
                <tbody role="alert" aria-live="polite" aria-relevant="all" id="stockPin">
            {% if portfolio.stocks %}
                {% for stock in portfolio.stocks %}   
                    <tr class="even">
                        <td class=" sorting_1"><a href="#" onClick=goStock(this) id="stockLink"> {{ stock.ticker }} </a> </td>
                        <td class=" " id="currentPrice">{{ stock.current_price }}<span id="priceChange"></span> </td>
                        <td class=" ">{{ stock.buy_date }} - {{ stock.sell_date }}</td>
                        <td class=" ">{{ stock.number_of_shares }}</td>
                        <td class=" ">{{ stock.initial_price }}</td>                                    
                    </tr>
                {% endfor %}
            {% endif %}                       
                </tbody>
                </table>
            </div>                                        
        </div>
    </div>
    {% endfor %}
</div>
</div>
<form id="myForm" class="form-horizontal" action="/user/individual_stock" method="post" style="display:none">
    {% csrf_token %}
    <input type="text" class="form-control" id="company_name" value="company_name" name="company_name">    
</form> 
 <script src="/static/js/user/my_portfolios.js"></script>
{% endblock %}


