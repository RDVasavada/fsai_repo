{% extends "base.html" %}
{% block content %}
  <div class="nav">
    <a href="/user/portfolio_settings" data-target="-1" style=";margin-right:50px;float:right">           
      <h1><span class="icon-angle-right" style="display: inline-block;line-height: 90vh;position: fixed;top:50px;left:88vw;"></span></h1></a>
    <a href="/user/my_portfolios" data-target="1" style=";margin-left:50px;float:left">
       <h1><span class="icon-angle-left" style="display: inline-block;line-height: 90vh;position: fixed;top:50px;left:12vw;"></span></h1>
    </a>
  </div>
<div class="sceneElement" data-viewport="0">
 <div class="col-lg-3 col-md-3 col-sm-10" style="padding:0px;height:100%;color:black;padding-left:35px">
    <div class="block block-drop-shadow" style="height:100%;background-color:rgba(0,0,0,0.2)">
        <div class="header">
            <h2>My Portfolios</h2>
        </div>
        <div class="content list-group ui-sortable" id="sortable_example_1" style="background:rgba(0,0,0,0.5);">
            <a href="/user/my_portfolios" class="list-group-item" style="text-align:center;height:150px">
              <br>
              <span style="font-size:24px;font-weight:100;font-family:'Helvetica Neue';top:7px;left:7px;position:relative;display:inline;line-height:75px">
          Portfolios Summary
              </span><br><br>
             <span style="font-size:14px;font-weight:100;font-family:'Helvetica Neue';position:relative;bottom:7px;color:#00ff00">
              </span><br>           
            </a>            
           {% for portfolio in portfolios %}      
            <a href="/user/individual_portfolio/{{portfolio.id}}" id="/user/individual_portfolio"  class="list-group-item" style="text-align:center;height:auto">{{portfolio.name}}
              <br>
              <span style="font-size:24px;font-weight:100;font-family:'Helvetica Neue';top:7px;left:7px;position:relative">
                ${{portfolio.value}}
              </span><br><br>
             <span style="font-size:14px;font-weight:100;font-family:'Helvetica Neue';position:relative;bottom:7px;color:white">
                <div class="hp-icon" style="font-size:12px">
                      <span class="hp-sm"> Risk</span> <br>      
                <div class="knob">
                    <div style="display: block; width: 100px; height: 100px;">
                        <canvas width="100" height="100" style="position:absolute;bottom:0px"></canvas>
                        <input id="risks" type="text" 
                            {% if portfolio.risk > 50 %}
                                 data-fgcolor="red" 
                            {% else %}
                                data-fgcolor="green"
                            {% endif %} data-min="0" data-max="100" data-width="100" data-height="100" value="{{portfolio.risk}}" data-readonly="true" readonly="readonly" style="width: 50px; height: 33px; position: absolute; vertical-align: middle; top: 25%; left: 50%; margin-top: -16px; margin-left: -25px; border: 0px; background: none; font-style: normal; font-variant: normal; font-weight: bold; font-stretch: normal; font-size: 20px; line-height: normal; font-family: Arial; text-align: center; color: rgb(255, 0, 0); padding: 0px; -webkit-appearance: none;">
                        </input>
                    </div>
                </div>
                  <span class="hp-main" id="risks"></span>                                
              </div>                  
              </span><br>
             <span style="font-size:14px;font-weight:100;font-family:'Helvetica Neue'">
                {{portfolio.no_of_tickers}} Tickers
              </span>                
            </a>
            {% endfor %}
        </div>        
    </div>
</div> 
<form id="myForm" class="form-horizontal" action="/user/individual_stock" method="post" style="display:none">
    {% csrf_token %}
    <input type="text" class="form-control" id="company_name" value="" name="company_name">    
</form>

 <div class="col-lg-9 col-md-9 col-sm-6">
    <!--first portfolio -->
    <div class="block block-drop-shadow">
    <div class="header">
        <h2 style="text-align:center;">{{ portfolio.name }}</h2>
    </div>
        <!-- <div class="head bg-dot30"> -->
        <div class="content" style="background-color:rgba(0,0,0,0.6)">

        <div id="pieChart" style="width:100%;text-align:center"></div>
            <script>
            var colors = ["white","#87CEEB","rgb(79, 155, 43)","color: rgb(255, 152, 6)"," color: rgb(166, 45, 45);"]
            var pie = new d3pie("pieChart", {
                "header": {
                    "title": {
                        "text": "Stock Distribution",
                        "color": "#ffffff",
                        "fontSize": 24,
                        "": "helvetica"
                    },
                    "subtitle": {
                        "color": "#999999",
                        "fontSize": 12,
                        "font": "open sans"
                    },
                    "titleSubtitlePadding": 9
                },
                "footer": {
                    "color": "#999999",
                    "fontSize": 10,
                    "font": "open sans",
                    "location": "bottom-left"
                },
                "size": {
                    "canvasWidth": 590,
                    "pieOuterRadius": "90%"
                },
                "data": {
                    "sortOrder": "value-desc",
                    "content": [
                    {% for stock in stocks %}
                        {
                            "label": "{{stock.ticker}}",
                            "value": {{stock.number_of_shares}},
                            "color": colors[{{ forloop.counter }}]
                        },
                    {% endfor %}

                    ]
                },
                "labels": {
                    "outer": {
                        "pieDistance": 32
                    },
                    "inner": {
                        "hideWhenLessThanPercentage": 3
                    },
                    "mainLabel": {
                        "color": "#ffffff",
                        "fontSize": 11
                    },
                    "percentage": {
                        "color": "#ffffff",
                        "decimalPlaces": 0
                    },
                    "value": {
                        "color": "#adadad",
                        "fontSize": 11
                    },
                    "lines": {
                        "enabled": true
                    },
                    "truncation": {
                        "enabled": true
                    }
                },
                "effects": {
                    "pullOutSegmentOnClick": {
                        "effect": "linear",
                        "speed": 400,
                        "size": 8
                    }
                },
                "misc": {
                    "gradient": {
                        "enabled": false,
                        "percentage": 100
                    }
                }
            });
            </script>

                <div class="blsock" style="width:100%">
                    <div class="input-group" style="width:100%;text-align:center">
                        <div class="btn-group btn-group-lg" style="text-align:center">
                            <button type="button" class="btn btn-default btn-clean">Table View</button>
                            <button type="button" class="btn btn-default btn-clean">Card View</button>
                            <button type="button" class="btn btn-default btn-clean">Back Test</button>    
                        </div>              
                    </div>  
                </div>  

                    <table class="table table-hover margin bottom">
                    <thead>
                    <tr>
                        <th>Market Ticker</th>
                        <th class="text-center">Company Name</th>
                        <th class="text-center">Buy Date</th>
                        <th class="text-center">Recommended Sell Date</th>
                        <th class="text-center">Market Sentiment</th>
                        <th class="text-center">Stock Price</th>
                        <th class="text-center">Percent gains</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for stock in stocks %}
                        <td><a href="#" onClick=goStock(this) id="stockLink">{{stock.ticker}}</a></td>
                        <td class="text-center small">{{stock.ticker}}</td>
                        <td class="text-center">{{stock.buy_date}}</td>
                        <td class="text-center">{{stock.sell_date}}</td>
                        <td class="text-center">{{market_sentiment | random }}</td>
                        <td class="text-center">{{stock.current_price}}</td>
{% if stock.gain >= 0%}
                         <td class="text-center" style="color:rgba(0,255,0,1)"><span style="font-size:20px;">&uarr;</span>&nbsp;{{ stock.gain }}%</td>
 {% else %}
                         <td class="text-center" style="color:rgba(255,0,0,1);"><span style="font-size:20px;">&darr;</span>&nbsp;{{ stock.gain }}%</td>
 {% endif %}

                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
    </div>


   </div>
</div>
</div>

                    <tr>


</body>

{% endblock %}
{% block scripts %}

 <script src="/static/js/user/individual_portfolio.js"></script>

{% endblock %}
